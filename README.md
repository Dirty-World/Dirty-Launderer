[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![CI Build](https://github.com/the-dirty-launderer/dirty-launderer/actions/workflows/python-tests.yml/badge.svg)](https://github.com/the-dirty-launderer/dirty-launderer/actions/workflows/python-tests.yml)
[![Docs](https://img.shields.io/badge/docs-GitHub%20Pages-blue)](https://the-dirty-launderer.github.io/dirty-launderer)
[![Version](https://img.shields.io/badge/version-1.0.0-blue)](#)

# Dirty Launderer üßº

![a3ca62e7-0fc7-4a3b-bfd7-a861dde5df88](https://github.com/user-attachments/assets/9ba31cb1-75c4-4198-9222-48476874cd87)

üíÉ *A lady in the streets, and clean in the sheets‚Ä¶ of tracking parameters.* üßº

A privacy-first Telegram bot that automatically cleans tracking parameters from URLs, and proxies uncleanable links using services like Invidious, Nitter, Libreddit, and more.

## üîß Features

- Auto-cleans URLs from common trackers
- Supports proxying via privacy frontends
- Fully admin-configurable via Telegram commands
- PII-safe logging to Google Cloud Logging
- Modular domain handler design
- Cloud Functions + Firestore + GitHub Actions

## üì¶ Repo Structure

```
dirty-launderer/
‚îú‚îÄ‚îÄ bot/                  # Telegram bot source code
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ admin/           # Admin command handlers
‚îÇ   ‚îú‚îÄ‚îÄ handlers/        # Domain-specific link handlers
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # Firestore + proxy helpers
‚îú‚îÄ‚îÄ dist/                # Deployment ZIP (autogenerated)
‚îú‚îÄ‚îÄ post_apply.sh        # Optional webhook registrar
‚îú‚îÄ‚îÄ .github/workflows/   # GitHub Actions
‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml
‚îú‚îÄ‚îÄ README.md
```

> üìù **Note**: Infrastructure code has been moved to a [separate repository](https://github.com/Dirty-World/dirty-launderer-infra) for better maintainability and security.

## üöÄ Deployment

1. **Add secrets to GitHub**:
    - `GCP_CREDENTIALS` - Google Cloud service account key
    - `GCP_PROJECT_ID` - Google Cloud project ID
    - `TELEGRAM_BOT_TOKEN` - Telegram bot token from BotFather
    - `ADMIN_CHAT_ID` - Telegram chat ID for admin notifications
    - `GCS_BUCKET_NAME` - Google Cloud Storage bucket for artifacts

2. **Push to main branch** ‚Üí GitHub Actions will:
    - Run tests
    - Build and zip bot code
    - Upload to Google Cloud Storage
    - Trigger infrastructure deployment via repository dispatch

3. **Infrastructure deployment** will:
    - Update Cloud Functions
    - Configure Firestore
    - Set up monitoring and logging
    - Register webhook with Telegram

## ü§ñ Telegram Commands

Run `/setcommands` in BotFather and paste:

```
setdomain - Set handling for a specific domain
listdomains - View all domain rules
resetdomains - Reset domain settings to default
setdefault - Set default behavior for unknown domains
setlogging - Enable or disable safe logging
showlogging - View current logging mode
previewdomain - Preview handling for a domain
tools - Show admin tools
welcome - Show welcome/help message
ping - Check if the bot is running and webhook is healthy
alerttest - Test an admin alert
status - Check bot status and webhook info
proxies - Show count of active proxy frontends
configsummary - Show this group's domain config
commands - Show a full list of bot commands
```

## üí¨ Credits

Made by [you], deployed serverlessly on GCP.
